@page "/counter"
@using Blazr.Diode.Server.Web.Counter;

@inject DiodeStore<CounterData> Store
@inject DiodeDispatcher Dispatcher

<PageTitle>Counter</PageTitle>

<h1>Counter</h1>

<p role="status">Current count: @Store.Item.Counter</p>
<div class="row">

    <div class="col-12 col-sm-6 col-md-4 mb-3">
        <button class="btn btn-primary" @onclick="IncrementCount">@_action.Name</button>
    </div>

    <div class="col-12 col-sm-6 col-md-8 mb-3">
        <input class="form-range" type="range" min="1" max="10" @bind=_range @bind:after="this.RangeChanged" />
    </div>

</div>

@code {
    private CounterIncrementAction _action = new CounterIncrementAction() { IncrementBy = 1 };
    private int _range = 1;

    private async Task IncrementCount()
    {
        await Dispatcher.DispatchAsync<CounterData, CounterIncrementAction>(_action);
    }

    private void RangeChanged()
    {
        _action = new CounterIncrementAction() { IncrementBy = _range };
    }
}
